(self.webpackChunkionic_docs=self.webpackChunkionic_docs||[]).push([[11769],{25750:function(e,n,t){"use strict";t.r(n),t.d(n,{frontMatter:function(){return r},metadata:function(){return l},toc:function(){return p},default:function(){return c}});var i=t(22122),a=t(19756),o=(t(67294),t(3905)),r={},l={unversionedId:"cli/configuration",id:"cli/configuration",isDocsHomePage:!1,title:"Configuration",description:"Files",source:"@site/docs/cli/configuration.md",sourceDirName:"cli",slug:"/cli/configuration",permalink:"/docs/cli/configuration",editUrl:"https://github.com/ionic-team/ionic-docs/edit/main/docs/cli/configuration.md",version:"current",frontMatter:{},sidebar:"cli",previous:{title:"Ionic CLI",permalink:"/docs/cli"},next:{title:"Live Reload",permalink:"/docs/cli/livereload"}},p=[{value:"Files",id:"files",children:[{value:"Project Configuration File",id:"project-configuration-file",children:[]}]},{value:"Environment Variables",id:"environment-variables",children:[]},{value:"Flags",id:"flags",children:[]},{value:"Hooks",id:"hooks",children:[]},{value:"Multi-app Projects",id:"multi-app-projects",children:[{value:"Setup Steps",id:"setup-steps",children:[]},{value:"Project Structure",id:"project-structure",children:[]},{value:"Config File",id:"config-file",children:[]},{value:"Adding an App",id:"adding-an-app",children:[]}]},{value:"Advanced Configuration",id:"advanced-configuration",children:[{value:"Overriding the Build",id:"overriding-the-build",children:[]},{value:"Command Options",id:"command-options",children:[]},{value:"Telemetry",id:"telemetry",children:[]}]}],s={toc:p};function c(e){var n=e.components,t=(0,a.Z)(e,["components"]);return(0,o.kt)("wrapper",(0,i.Z)({},s,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"files"},"Files"),(0,o.kt)("p",null,"Configuration values are stored in JSON files. The Ionic CLI maintains a global configuration file, usually located at ",(0,o.kt)("inlineCode",{parentName:"p"},"~/.ionic/config.json"),", and project configuration files, usually at the project's root directory as ",(0,o.kt)("inlineCode",{parentName:"p"},"ionic.config.json"),"."),(0,o.kt)("p",null,"The CLI provides commands for setting and printing config values from project config files and the global CLI config file. See ",(0,o.kt)("inlineCode",{parentName:"p"},"ionic config --help")," or see the documentation for usage of ",(0,o.kt)("a",{parentName:"p",href:"/docs/cli/commands/config-get"},(0,o.kt)("inlineCode",{parentName:"a"},"ionic config get"))," and ",(0,o.kt)("a",{parentName:"p",href:"/docs/cli/commands/config-set"},(0,o.kt)("inlineCode",{parentName:"a"},"ionic config set")),"."),(0,o.kt)("h3",{id:"project-configuration-file"},"Project Configuration File"),(0,o.kt)("p",null,"Each Ionic project has a project configuration file, usually at the project's root directory. The following is an annotated ",(0,o.kt)("inlineCode",{parentName:"p"},"ionic.config.json")," file."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  // The human-readable name of the app.\n  "name": "My App",\n\n  // The project type of the app. The CLI uses this value to determine which\n  // commands and command options are available, what to output for help\n  // documentation, and what to use for web asset builds and the dev server.\n  "type": "angular",\n\n  // The App ID for Appflow.\n  "id": "abc123",\n\n  // Configuration object for integrations such as Cordova and Capacitor.\n  "integrations": {\n    "cordova": {\n      ...\n    }\n  },\n\n  // Hook configuration--see the Hooks section below for details.\n  "hooks": {\n    ...\n  }\n}\n')),(0,o.kt)("h2",{id:"environment-variables"},"Environment Variables"),(0,o.kt)("p",null,"The CLI will look for the following environment variables:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"IONIC_CONFIG_DIRECTORY"),": The directory of the global CLI config. Defaults to ",(0,o.kt)("inlineCode",{parentName:"li"},"~/.ionic"),"."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"IONIC_HTTP_PROXY"),": Set a URL for proxying all CLI requests through. See ",(0,o.kt)("a",{parentName:"li",href:"./using-a-proxy"},"Using a Proxy"),"."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"IONIC_TOKEN"),": Automatically authenticates with ",(0,o.kt)("a",{parentName:"li",href:"https://ionic.io/appflow"},"Appflow"),".")),(0,o.kt)("h2",{id:"flags"},"Flags"),(0,o.kt)("p",null,"CLI flags are global options that alter the behavior of a CLI command."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"--help"),": Instead of running the command, view its help page."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"--verbose"),": Show all log messages for debugging purposes."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"--quiet"),": Only show ",(0,o.kt)("inlineCode",{parentName:"li"},"WARN")," and ",(0,o.kt)("inlineCode",{parentName:"li"},"ERROR")," log messages."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"--no-interactive"),": Turn off interactive prompts and fancy outputs. If CI or a non-TTY terminal is detected, the CLI is automatically non-interactive."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"--confirm"),": Turn on auto-confirmation of confirmation prompts. Careful: the CLI prompts before doing something potentially harmful. Auto-confirming may have unintended results.")),(0,o.kt)("h2",{id:"hooks"},"Hooks"),(0,o.kt)("p",null,"The CLI can run scripts during certain events, such as before and after builds. To hook into the CLI, the following ",(0,o.kt)("a",{parentName:"p",href:"https://docs.npmjs.com/misc/scripts"},"npm scripts")," can be used in ",(0,o.kt)("inlineCode",{parentName:"p"},"package.json"),":"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"ionic:serve:before"),": executed before the dev server starts"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"ionic:serve:after"),": executed after the dev server is terminated"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"ionic:build:before"),": executed before a web asset build begins"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"ionic:build:after"),": executed after a web asset build finishes"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"ionic:capacitor:run:before"),": executed during ",(0,o.kt)("inlineCode",{parentName:"li"},"ionic capacitor run")," before capacitor open is executed"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"ionic:capacitor:build:before"),": executed during ",(0,o.kt)("inlineCode",{parentName:"li"},"ionic capacitor build")," before capacitor open is executed"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"ionic:capacitor:sync:after"),": executed during ",(0,o.kt)("inlineCode",{parentName:"li"},"ionic capacitor sync")," after a sync")),(0,o.kt)("p",null,"When using a shell script for any of the hooks, hook context is defined in environment variables prefixed with ",(0,o.kt)("inlineCode",{parentName:"p"},"IONIC_CLI_HOOK_CTX_"),"."),(0,o.kt)("p",null,"The following example shows the environment variables that are set for the ",(0,o.kt)("inlineCode",{parentName:"p"},"ionic:capacitor:build")," hook."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"IONIC_CLI_HOOK_CTX_NAME=capacitor:build:before\nIONIC_CLI_HOOK_CTX_BUILD_CORDOVA_ASSETS=true\nIONIC_CLI_HOOK_CTX_BUILD_ENGINE=browser\nIONIC_CLI_HOOK_CTX_BUILD_PROJECT=app\nIONIC_CLI_HOOK_CTX_BUILD_TYPE=angular\nIONIC_CLI_HOOK_CTX_BUILD_VERBOSE=false\nIONIC_CLI_HOOK_CTX_CAPACITOR_APP_ID=io.ionic.starter\nIONIC_CLI_HOOK_CTX_CAPACITOR_APP_NAME=ionic-starter-app\nIONIC_CLI_HOOK_CTX_CAPACITOR_VERBOSE=false\n")),(0,o.kt)("p",null,"Hooks can also be defined in ",(0,o.kt)("inlineCode",{parentName:"p"},"ionic.config.json"),". Define a ",(0,o.kt)("inlineCode",{parentName:"p"},"hooks")," object within the project, where each key is the name of the hook (without the ",(0,o.kt)("inlineCode",{parentName:"p"},"ionic:")," prefix), and the value is a path to a JavaScript file or an array of paths."),(0,o.kt)("p",null,"In the following example, the file is imported and run during the ",(0,o.kt)("inlineCode",{parentName:"p"},"ionic:build:before")," hook."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'"hooks": {\n  "build:before": "./scripts/build-before.js"\n},\n')),(0,o.kt)("p",null,"JavaScript hook files should export a single function, which is passed a single argument (",(0,o.kt)("inlineCode",{parentName:"p"},"ctx"),") whenever the hook executes."),(0,o.kt)("p",null,"The argument is the context given to the hook file, which differs from hook to hook and with different invocations."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"./scripts/build-before.js"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"module.exports = function(ctx) {\n  console.log(ctx);\n};\n")),(0,o.kt)("h2",{id:"multi-app-projects"},"Multi-app Projects"),(0,o.kt)("small",null,(0,o.kt)("em",null,"Available in CLI 6.2.0+")),(0,o.kt)("p",null,"The Ionic CLI supports a multi-app configuration setup, which involves multiple Ionic apps and shared code within a single repository, or ",(0,o.kt)("a",{parentName:"p",href:"/docs/reference/glossary#monorepo"},"monorepo"),"."),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"These docs give an overview of the multi-app feature of the Ionic CLI, but don't really go into details for each framework."),(0,o.kt)("p",{parentName:"blockquote"},"If you're using Angular, please see ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/ionic-team/ionic-cli/wiki/Angular-Monorepo"},"this article")," for examples.")),(0,o.kt)("h3",{id:"setup-steps"},"Setup Steps"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Create a directory and initialize a monorepo (see ",(0,o.kt)("a",{parentName:"p",href:"#project-structure"},"Project Structure")," for full details).")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Initialize the monorepo as an Ionic multi-app project. This will create a multi-app ",(0,o.kt)("inlineCode",{parentName:"p"},"ionic.config.json")," file. See ",(0,o.kt)("a",{parentName:"p",href:"#config-file"},"Config File")," for full details."),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"$ ionic init --multi-app\n"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Use ",(0,o.kt)("inlineCode",{parentName:"p"},"ionic start")," to create Ionic apps or ",(0,o.kt)("inlineCode",{parentName:"p"},"ionic init")," to initialize existing apps (see ",(0,o.kt)("a",{parentName:"p",href:"#adding-an-app"},"Adding an App")," for full details)."))),(0,o.kt)("h3",{id:"project-structure"},"Project Structure"),(0,o.kt)("p",null,"In a multi-app project, project structure is flexible. The only requirement is a multi-app ",(0,o.kt)("inlineCode",{parentName:"p"},"ionic.config.json")," file at the root of the repository."),(0,o.kt)("p",null,"Below is an example setup, where apps in the ",(0,o.kt)("inlineCode",{parentName:"p"},"apps/")," directory are separated from the shared code in the ",(0,o.kt)("inlineCode",{parentName:"p"},"lib/")," directory. Notice the root ",(0,o.kt)("inlineCode",{parentName:"p"},"ionic.config.json")," file and the monorepo's ",(0,o.kt)("inlineCode",{parentName:"p"},"package.json")," file."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"apps/\n\u251c\u2500\u2500 myApp/\n\u2514\u2500\u2500 myOtherApp/\nlib/\nionic.config.json\npackage.json\n")),(0,o.kt)("h3",{id:"config-file"},"Config File"),(0,o.kt)("p",null,"In a multi-app project, apps share a single ",(0,o.kt)("inlineCode",{parentName:"p"},"ionic.config.json")," file at the root of the repository instead of each app having their own. The multi-app config file contains the configuration for each app by nesting configuration objects in a ",(0,o.kt)("inlineCode",{parentName:"p"},"projects")," object. A default app can be specified using ",(0,o.kt)("inlineCode",{parentName:"p"},"defaultProject"),"."),(0,o.kt)("p",null,"Below is an example file, which corresponds to the file structure above."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "defaultProject": "myApp",\n  "projects": {\n    "myApp": {\n      "name": "My App",\n      "integrations": {},\n      "type": "angular",\n      "root": "apps/myApp"\n    },\n    "myOtherApp": {\n      "name": "My Other App",\n      "integrations": {},\n      "type": "angular",\n      "root": "apps/myOtherApp"\n    }\n  }\n}\n')),(0,o.kt)("p",null,"When a multi-app project is detected, the Ionic CLI will operate under the context of an app configured in the root ",(0,o.kt)("inlineCode",{parentName:"p"},"ionic.config.json"),". Project selection criteria is as follows:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"If the global CLI option ",(0,o.kt)("inlineCode",{parentName:"li"},"--project")," is specified, the project is looked up by key in the ",(0,o.kt)("inlineCode",{parentName:"li"},"projects")," object. For example, ",(0,o.kt)("inlineCode",{parentName:"li"},"--project=myApp")," will select the ",(0,o.kt)("inlineCode",{parentName:"li"},"myApp")," project."),(0,o.kt)("li",{parentName:"ol"},"If the CLI detects it is being run within a project path, configured with the ",(0,o.kt)("inlineCode",{parentName:"li"},"root")," key, it will select the matched project. For example, using the CLI within the ",(0,o.kt)("inlineCode",{parentName:"li"},"apps/myOtherApp/src")," directory will select the ",(0,o.kt)("inlineCode",{parentName:"li"},"myOtherApp")," project."),(0,o.kt)("li",{parentName:"ol"},"If a ",(0,o.kt)("inlineCode",{parentName:"li"},"defaultProject")," is specified in ",(0,o.kt)("inlineCode",{parentName:"li"},"ionic.config.json"),", it will select the specified project when the above criteria is not met.")),(0,o.kt)("h3",{id:"adding-an-app"},"Adding an App"),(0,o.kt)("p",null,"Apps can be registered in a multi-app project either by using ",(0,o.kt)("inlineCode",{parentName:"p"},"ionic start")," to create new apps or ",(0,o.kt)("inlineCode",{parentName:"p"},"ionic init")," to initialize existing apps."),(0,o.kt)("h4",{id:"using-ionic-start"},"Using ",(0,o.kt)("inlineCode",{parentName:"h4"},"ionic start")),(0,o.kt)("p",null,"If a multi-app project is detected during ",(0,o.kt)("inlineCode",{parentName:"p"},"ionic start"),", the CLI will add the app configuration to the root ",(0,o.kt)("inlineCode",{parentName:"p"},"ionic.config.json")," file instead of creating a project-specific one."),(0,o.kt)("p",null,"Dependency installation can be skipped using ",(0,o.kt)("inlineCode",{parentName:"p"},"--no-deps")," if dependencies are hoisted to the root of the monorepo."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},'$ cd apps/\n$ ionic start "My New App" --no-deps\n')),(0,o.kt)("h4",{id:"using-ionic-init"},"Using ",(0,o.kt)("inlineCode",{parentName:"h4"},"ionic init")),(0,o.kt)("p",null,"If an app was created in a way other than ",(0,o.kt)("inlineCode",{parentName:"p"},"ionic start"),", for example by using a prebuilt template, use ",(0,o.kt)("inlineCode",{parentName:"p"},"ionic init")," to register the existing app with the multi-app project."),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"Make sure the app doesn't have an existing ",(0,o.kt)("inlineCode",{parentName:"p"},"ionic.config.json"),".")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"$ cd apps/existing-app/\n$ ionic init\n")),(0,o.kt)("h2",{id:"advanced-configuration"},"Advanced Configuration"),(0,o.kt)("h3",{id:"overriding-the-build"},"Overriding the Build"),(0,o.kt)("p",null,"Normally, the CLI runs a hard-coded set of commands based on the project type. For example, the standard web asset build for Angular projects is ",(0,o.kt)("inlineCode",{parentName:"p"},"ng run app:build"),". The web asset build can be overridden and ",(0,o.kt)("inlineCode",{parentName:"p"},"ionic build")," can continue to be used by utilizing the ",(0,o.kt)("inlineCode",{parentName:"p"},"ionic:build")," ",(0,o.kt)("a",{parentName:"p",href:"https://docs.npmjs.com/misc/scripts"},"npm script"),". Similarly, the dev server can be overridden by using the ",(0,o.kt)("inlineCode",{parentName:"p"},"ionic:serve")," npm script."),(0,o.kt)("p",null,"Pay close attention to the flags supplied to the script by the Ionic CLI. Irregularities may occur if options are not respected, especially for livereload on devices."),(0,o.kt)("h3",{id:"command-options"},"Command Options"),(0,o.kt)("p",null,"Command options can be expressed with environment variables. They are normally set with ",(0,o.kt)("inlineCode",{parentName:"p"},"--opt=value")," syntax. The naming of these environment variables follows a pattern: start with ",(0,o.kt)("inlineCode",{parentName:"p"},"IONIC_CMDOPTS_"),", add the command name (replacing any spaces with underscores), add the option name (replacing any hyphens with underscores), and then uppercase everything. Boolean flags (command-line options that don't take a value) can be set to ",(0,o.kt)("inlineCode",{parentName:"p"},"1")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"0"),". Strip the ",(0,o.kt)("inlineCode",{parentName:"p"},"--no-")," prefix in boolean flags, if it exists (",(0,o.kt)("inlineCode",{parentName:"p"},"--no-open")," in ionic serve can be expressed with ",(0,o.kt)("inlineCode",{parentName:"p"},"IONIC_CMDOPTS_SERVE_OPEN=0"),", for example)."),(0,o.kt)("p",null,"For example, the command options in ",(0,o.kt)("inlineCode",{parentName:"p"},"ionic cordova run ios -lc --livereload-port=1234 --host=0.0.0.0")," can also be expressed with this series of environment variables:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"$ export IONIC_CMDOPTS_CORDOVA_RUN_LIVERELOAD=1\n$ export IONIC_CMDOPTS_CORDOVA_RUN_CONSOLELOGS=1\n$ export IONIC_CMDOPTS_CORDOVA_RUN_LIVERELOAD_PORT=1234\n$ export IONIC_CMDOPTS_CORDOVA_RUN_HOST=0.0.0.0\n")),(0,o.kt)("p",null,"If these variables are set in the environment, ",(0,o.kt)("inlineCode",{parentName:"p"},"ionic cordova build ios")," will use new defaults for its options."),(0,o.kt)("h3",{id:"telemetry"},"Telemetry"),(0,o.kt)("p",null,"The CLI sends usage data to Ionic to create a better experience. To disable this functionality, run ",(0,o.kt)("inlineCode",{parentName:"p"},"ionic config set -g telemetry false"),"."))}c.isMDXComponent=!0}}]);