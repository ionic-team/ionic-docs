---
title: v8へのアップデート
---

# Ionic 7 から 8 へのアップデート

:::note
このガイドでは、アプリをIonic 7の最新バージョンにアップデート済みであることを前提としています。このガイドを始める前に、[Ionic 7へのアップグレードガイド](./7-0)に従っていることを確認してください。
:::

:::info Breaking Changes
Ionic 7からIonic 8への**変更点**の完全なリストについては、Ionic Frameworkリポジトリの[変更点ドキュメント](https://github.com/ionic-team/ionic-framework/blob/feature-8.0/BREAKING.md#version-8x)を参照してください。
:::

## はじめ方

### Angular

1. Ionic 8はAngular 16+をサポートしています。Angular Update Guide](https://update.angular.io/)に従って、Angularの最新バージョンにアップデートしてください。

2. Ionic 8の最新バージョンにアップデートします：

```shell
npm install @ionic/angular@next
```

Ionic Angular ServerとIonic Angular Toolkitを使用している場合は、それらもアップデートしてください：

```shell
npm install @ionic/angular@next @ionic/angular-server@next @ionic/angular-toolkit@11
```

> 注意: `@ionic/angular-toolkit@11` には最低でも Angular 17 が必要です。Angular 16の場合は、代わりに`@ionic/angular-toolkit@10`にアップデートしてください。

3. `@ionic/angular` からインポートした `IonBackButtonDelegate` の代わりに `IonBackButton` をインポートするように更新する。

### React

1. Ionic 8はReact 17+をサポートしています。最新バージョンのReactにアップデートしてください：

```shell
npm install react@latest react-dom@latest
```

2. Ionic 8の最新バージョンにアップデートする：

```shell
npm install @ionic/react@next @ionic/react-router@next
```

### Vue

1. Ionic 7はVue 3.0.6+をサポートしています。最新バージョンのVueにアップデートしてください：

```shell
npm install vue@latest vue-router@latest
```

2. Ionic 8の最新バージョンにアップデートする：

```shell
npm install @ionic/vue@next @ionic/vue-router@next
```

### Core

1. Ionic 8の最新バージョンにアップデートする：

```shell
npm install @ionic/core@next
```

## 推奨の変更

お手持ちのアプリケーションは引き続き動作するため、Ionic 8へのアップデートに以下の変更は必要ありません。ただし、Ionic 8の新機能を確実にご利用いただくために、以下の変更を行うことをお勧めします。

### Dark Theme

以前のバージョンでは、以下の方法でダークテーマを定義することが推奨されていました：

```css
@media (prefers-color-scheme: dark) {
  body {
    /* global app variables */
  }

  .ios body {
    /* global ios app variables */
  }

  .md body {
    /* global md app variables */
  }
}
```

Ionic Frameworkバージョン8では、ダークテーマはインポート可能なcssファイルで配布されています。以下は、Angularでダークテーマのファイルをインポートする例です：

```css
/* @import '@ionic/angular/css/palettes/dark.always.css'; */
/* @import "@ionic/angular/css/palettes/dark.class.css"; */
@import '@ionic/angular/css/palettes/dark.system.css';
```

ダークテーマは `body` セレクタの代わりに `:root` セレクタに適用されるようになりました。セレクタ [`:root`](https://developer.mozilla.org/en-US/docs/Web/CSS/:root) は `<html>` 要素を表し、セレクタ `html` と同じですが、特異性が高くなります。

新しいダークテーマ・ファイルをincludeするように移行しても、変更を引き起こす可能性は低いですが、カスタムCSS変数が`body`要素に設定されている場合、これらの新しいセレクタは予期しないオーバーライドを引き起こす可能性があります。グローバルなアプリケーション変数が設定されている場合は、代わりに `:root` セレクタをターゲットとするように更新することをお勧めします。

新しいダークテーマファイルの詳細については、[ダークモードドキュメント](../theming/dark-mode)を参照してください。

### ステップカラートークン

Ionic 8のハイコントラストテーマをよりよくサポートするために、テキストと背景色に別々のステップカラートークンが導入されました。これまでは、テキスト色と背景色の両方を1セットの `--ion-color-step-[number]` トークンで制御していました。

上記の新しくインポートされたダークテーマを使用すると、これらの新しいステップカラートークンもインポートされます。しかし、開発者はアプリケーションで手動で定義したステップカラートークンを更新する必要があります。

**背景色**に対する `--ion-color-step-[number]` の使用は、トークンの名前を `--ion-background-color-step-[number]` に変更することで移行できます。

**Example**:

```diff
button {
- background: var(--ion-color-step-400);
+ background: var(--ion-background-color-step-400);
}
```

**テキストカラー**の `--ion-color-step-[number]` の使用は、トークンの名前を `--ion-text-color-step-[number]` に変更し、1000から数値を引くことで移行できます。

**Example**:

```diff
button {
- color: var(--ion-color-step-400);
+ color: var(--ion-text-color-step-600); /* 1000 - 400 = 600 */
}
```

### ダイナミックフォント

`core.css`ファイルが更新され、デフォルトでダイナミックフォントスケーリングが有効になりました。

`ion-default-dynamic-font`変数が削除され、`--ion-dynamic-font`に置き換えられました。

これまでグローバルスタイルシートでダイナミックフォントスケーリングを有効にしていた開発者は、カスタムCSSを削除することでデフォルトの設定に戻すことができます。そうすることで、アプリケーションは以前のようにシームレスにダイナミック・フォント・スケーリングを利用し続けることができます。ダイナミック・フォント・スケーリングの適切な機能を妨げる可能性があるため、html要素のフォント・サイズを変更することは避けるべきです。

ダイナミック・フォント・スケーリングを無効にしたい開発者は、グローバル・スタイルシートで`--ion-dynamic-font: initial;`を設定することができます。しかし、拡大されたフォントサイズに依存しているユーザーにとってアクセシビリティ上の問題が生じる可能性があるため、これは推奨されません。

ダイナミックフォントの詳細については、[Dynamic Font Scaling documentation](../layout/dynamic-font-scaling)を参照してください。

### (Angular Only) `angular.json` CSSをimportする順番

現在 `angular.json` ファイルは `src/global.scss` をインポートする前に `src/theme/variables.scss` をインポートしています。このため、新しい[Dark Theme](#dark-theme)の変更をカスタマイズする際に、正しくないスタイルが適用される可能性があります。

代わりに `src/global.scss` ファイルを最初にインポートすることをお勧めします：

```diff
- "styles": ["src/theme/variables.scss", "src/global.scss"],
+ "styles": ["src/global.scss", "src/theme/variables.scss"],
```

## 必要な変更

### ブラウザーサポート

Ionicがサポートするブラウザーのリストが変更されました。 [ブラウザサポートガイド](../reference/browser-support) を確認し、サポートされているブラウザにアプリをデプロイしていることを確認してください。

`browserslist` または `.browserslistrc` ファイルがある場合は、以下の内容で更新してください：

```
Chrome >=89
ChromeAndroid >=89
Firefox >=75
Edge >=89
Safari >=15
iOS >=15
```

### チェックボックス

1. チェックボックスの残りのインスタンスを、[最新のフォーム制御構文](../api/checkbox#migrating-from-legacy-checkbox-syntax) を使用するように移行します。さらに、レガシーなフォームコントロール構文は削除されたので、`legacy`プロパティの使用をすべて削除します。

### Input

1. `size`プロパティを削除してください。代わりにCSSで入力の可視幅を指定するようになりました。
2. `accept`プロパティを削除する。
3. [モダンなフォームコントロール構文](../api/input#migrating-from-legacy-input-syntax)を使用するように、Inputの残りのインスタンスを移行します。さらに、レガシーなフォームコントロール構文は削除されたので、`legacy`プロパティの使用をすべて削除します。

### Item

1. `counter` または `counterFormatter` プロパティを削除します。代わりに `ion-input` と `ion-textarea` の同じ名前のプロパティを使用します。
2. `helper` スロットまたは `error` スロットを削除します。代わりに `ion-input` と `ion-textarea` の `helperText` プロパティと `errorText` プロパティを使用します。
3. `fill` または `shape` プロパティを削除します。代わりに `ion-input`、`ion-textarea`、`ion-select` で同じ名前のプロパティを使用します。

### Nav

1. このメソッドは `number` の代わりに `Promise<number>` を返すようになったので、`getLength` を使用している場合は、戻り値にアクセスする前に `await` するように更新してください。

### Picker

1. Ionic 8 にはインラインの `ion-picker` コンポーネントが同梱されるようになりました。レガシーピッカーを引き続き使用したい開発者は、`ion-picker` を使用している場合は `ion-picker-legacy` に更新してください。`pickerController` インポートに変更はない。なお、`ion-picker-legacy`コンポーネントは今後のIonicのメジャーリリースで削除される予定です。

### Toast

1. `ToastButton` から `cssClass` プロパティを削除します。代わりに `button` CSS Shadow Part を使用します。

### Radio

1. Radioの残りのインスタンスを[最新のフォーム制御構文](../api/radio#migrating-from-legacy-radio-syntax)を使用するように移行する。さらに、レガシーなフォーム制御構文は削除されたので、`legacy`プロパティの使用をすべて削除します

### Select

1. Selectの残りのインスタンスを[最新のフォームコントロール構文](../api/select#migrating-from-legacy-select-syntax)を使用するように移行します。さらに、レガシーなフォーム制御構文は削除されたので、`legacy`プロパティの使用をすべて削除します

### Textarea

1. 残っている Textarea のインスタンスを [modern form control syntax](../api/textarea#migrating-from-legacy-textarea-syntax) を使うように移行します。さらに、レガシーなフォーム制御構文は削除されたので、`legacy`プロパティの使用をすべて削除します。

### Toggle

1. 残っている Toggle のインスタンスを、[モダンなフォームコントロール構文](../api/toggle#migrating-from-legacy-toggle-syntax) を使用するように移行します。さらに、レガシーなフォーム制御構文は削除されたので、`legacy`プロパティの使用をすべて削除します。

## アップグレードの手助けが必要ですか？

必ず[Ionic 8 Breaking Changes Guide](https://github.com/ionic-team/ionic-framework/blob/feature-8.0/BREAKING.md#version-8x)をご覧ください。デフォルトのプロパティとCSS Variableの値に、開発者が注意する必要がある変更がいくつかありました。このページでは、ユーザーアクションが必要な変更のみをリストアップしています。

アップグレードのヘルプが必要な場合は、[Ionicフォーラム](https://forum.ionicframework.com/)にスレッドを投稿してください。
