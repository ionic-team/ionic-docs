<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Animation</title>
    <link rel="stylesheet" href="../../common.css" />
    <script src="../../common.js"></script>
    <script type="module" src="https://cdn.jsdelivr.net/npm/@ionic/core@7/dist/ionic/ionic.esm.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@ionic/core@7/css/ionic.bundle.css" />
    <script type="module">
      import { createAnimation } from 'https://cdn.jsdelivr.net/npm/@ionic/core@7/dist/ionic/index.esm.js';
      window.createAnimation = createAnimation;

      const cardA = createAnimation()
        .addElement(document.querySelector('#card-a'))
        .fill('none')
        .duration(1000)
        .keyframes([
          { offset: 0, transform: 'scale(1) rotate(0)' },
          { offset: 0.5, transform: 'scale(1.2) rotate(45deg)' },
          { offset: 1, transform: 'scale(1) rotate(0)' },
        ]);

      const cardB = createAnimation()
        .addElement(document.querySelector('#card-b'))
        .fill('none')
        .duration(1000)
        .keyframes([
          { offset: 0, transform: 'scale(1)', opacity: '1' },
          { offset: 0.5, transform: 'scale(1.2)', opacity: '0.3' },
          { offset: 1, transform: 'scale(1)', opacity: '1' },
        ]);

      const cardC = createAnimation()
        .addElement(document.querySelector('#card-c'))
        .fill('none')
        .duration(1000)
        .keyframes([
          { offset: 0, transform: 'scale(1)', opacity: '0.5' },
          { offset: 0.5, transform: 'scale(0.8)', opacity: '1' },
          { offset: 1, transform: 'scale(1)', opacity: '0.5' },
        ]);

      document.querySelector('#play').addEventListener('click', async () => {
        await cardA.play();
        await cardB.play();
        await cardC.play();
      });

      document.querySelector('#pause').addEventListener('click', () => {
        cardA.pause();
        cardB.pause();
        cardC.pause();
      });

      document.querySelector('#stop').addEventListener('click', () => {
        cardA.stop();
        cardB.stop();
        cardC.stop();
      });
    </script>

    <style>
      .container {
        flex-direction: column;
      }

      ion-card {
        width: 70%;
      }
    </style>
  </head>

  <body>
    <div class="container">
      <ion-card id="card-a">
        <ion-card-content>Card 1</ion-card-content>
      </ion-card>

      <ion-card id="card-b">
        <ion-card-content>Card 2</ion-card-content>
      </ion-card>

      <ion-card id="card-c">
        <ion-card-content>Card 3</ion-card-content>
      </ion-card>

      <div>
        <ion-button id="play">Play</ion-button>
        <ion-button id="pause">Pause</ion-button>
        <ion-button id="stop">Stop</ion-button>
      </div>
    </div>
  </body>
</html>
